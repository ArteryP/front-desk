{
 "align_labels_right": 0,
 "creation": "2020-06-15 00:05:43.133714",
 "css": ".print-format {\n    padding-top: 5cm;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Inn Folio",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "{% set company = frappe.get_doc(\"Global Defaults\").default_company %}\n{% set customer = frappe.get_doc(\"Customer\", doc.customer_id) %}\n{% set accumulator1 = namespace(debit = 0.0) %}\n{% set accumulator2 = namespace(credit = 0.0) %}\n{% set accumulator3 = namespace(refund = 0.0) %}\n{% set charge = {} %}\n{% set package_tax = {} %}\n\n{% for row in doc.folio_transaction %}\n    {% if row.transaction_type == 'Room Charge Tax/Service' or row.transaction_type == 'Breakfast Charge Tax/Service' or row.transaction_type == 'Breakfast Charge' %}\n\t{% if row.audit_date in charge %}\n            {% set _ = charge.update({row.audit_date: charge[row.audit_date] + row.amount}) %}\n        {% else %}\n            {% set _ = charge.update({row.audit_date: row.amount}) %}\n        {% endif %}\n    {% endif %}\n    {% if row.transaction_type == 'Package Tax' %}\n\t{% if row.audit_date in package_tax %}\n            {% set _ = package_tax.update({row.audit_date: package_tax[row.audit_date] + row.amount}) %}\n        {% else %}\n            {% set _ = package_tax.update({row.audit_date: row.amount}) %}\n        {% endif %}\n    {% endif %}\n{% endfor %}\n\n{% for key, value in charge.items() %}\n    {% set accumulator1.debit = accumulator1.debit + value %}\n{% endfor %}\n{% for key, value in package_tax.items() %}\n    {% set accumulator1.debit = accumulator1.debit + value %}\n{% endfor %}\n\n<div class= \"row\">\n    <div class= \"col-xs-6\">\n        <div class= \"col-xs-3\" style= \"padding-left:0px;\"><b>Customer:</b></div>\n        <div class= \"col-xs-9\">{{ doc.customer_id | upper }}</div>\n        <div class= \"col-xs-3\" style= \"padding-left:0px;\"><b>Type:</b></div>\n        <div class= \"col-xs-9\">{{ doc.type }}</div>\n        <div class= \"col-xs-3\" style= \"padding-left:0px;\"><b>Address:</b></b></div>\n        <div class= \"col-xs-9\">{{ customer.primary_address }}</div>\n    </div>\n    <div class= \"col-xs-6\">\n        <table class= \"table table-bordered\" style= \"margin-top:-1px;\">\n            <tr>\n                <th>Reservation</th>\n                <th>Folio</th> </tr>\n            <tr>\n                <td>{{doc.reservation_id}}</td>\n                <td>{{doc.name}}</td>\n            </tr>\n        </table>\n    </div>\n</div>\n\n<div class= \"row\">\n    <div class= \"col-xs-12\">\n        <table class= \"table table-bordered\">\n            <tr>\n                <th class= \"col-xs-2\">Date</th>\n                <th class= \"col-xs-2\">Type</th>\n                <th class= \"col-xs-4\">Description/Remark</th>\n                <th class= \"col-xs-2\">Debit</th>\n                <th class= \"col-xs-2\">Credit</th>\n            </tr>\n\n            {% for row in doc.folio_transaction %}\n            {% if row.transaction_type != 'Room Charge Tax/Service' and row.transaction_type != 'Breakfast Charge Tax/Service' and row.transaction_type != 'Package Tax' and row.transaction_type != 'Breakfast Charge' %}\n                {% if row.sub_folio == 'A' and row.is_void == 0 %}\n                    <tr>\n                        <td>{{row.audit_date}}</td>\n                        <td>{{row.transaction_type}}</td>\n                        <td>{{row.remark}}</td>\n\n                        {% if row.flag == 'Debit' %}\n                            {% set accumulator1.debit = accumulator1.debit + row.amount %}\n\n\t\t\t    {% set tmp = namespace(amount = 0.0) %}\n                            {% if row.transaction_type == 'Room Charge' %}\n                                {% set tmp.amount = row.amount + charge[row.audit_date] %}\n\t\t\t    {% elif row.transaction_type == 'Package' %}\n                                {% set tmp.amount = row.amount + package_tax[row.audit_date] %}\n\t\t\t    {% else %}\n                                {% set tmp.amount = row.amount %}\n\t\t\t    {% endif %}\n\n\t\t\t    <td class= \"text-right\">\n                                {{ frappe.format_value(tmp.amount, {\"fieldtype\":\"Currency\"}) }}\n                            </td>\n                            <td class= \"text-center\">-</td> \n                        {% elif row.flag == 'Credit' %}\n                            {% set accumulator2.credit = accumulator2.credit + row.amount %}\n\n                            <td class= \"text-center\">-</td>\n                            <td class= \"text-right\">\n                                {{ frappe.format_value(row.amount, {\"fieldtype\":\"Currency\"}) }}\n                            </td>\n                        {% endif %}\n\n                        {% if row.transaction_type == 'Refund' %}\n                            {% set accumulator3.refund = accumulator3.refund + row.amount %}\n                        {% endif %}\n                    </tr>\n                {% endif %}\n            {% endif %}\n            {% endfor %}\n\n            <tr>  \n                <td colspan=\"3\" class= \"text-right\"><b>Total</b></td>\n                <td class= \"text-right\">\n                    <b>{{ frappe.format_value(accumulator1.debit, {\"fieldtype\":\"Currency\"}) }}</b>\n                </td>\n                <td class= \"text-right\">\n                    <b>{{ frappe.format_value(accumulator2.credit, {\"fieldtype\":\"Currency\"}) }}</b>\n                </td>\n            </tr>\n        </table>\n\n        {% set charge = accumulator1.debit - accumulator3.refund %}\n\n        <table class= \"table\">\n            <tr style= \"font-weight: bold\">\n                <td class= \"col-xs-8 text-right\">\n                    Total Charge:\n                    <br>\n                    Total Payment:\n                </td>\n                <td class= \"col-xs-2 text-right\">\n                    {{ frappe.format_value(charge, {\"fieldtype\":\"Currency\"}) }}\n                    <br>\n                </td>\n                <td class= \"col-xs-2 text-right\">\n                    <br>\n                    {{ frappe.format_value(accumulator2.credit, {\"fieldtype\":\"Currency\"}) }}\n                </td>\n            </tr>\n            <tr style= \"font-weight: bold\">\n                <td class= \"col-xs-8 text-right\">Total Refund:</td>\n                <td class= \"col-xs-2 text-right\">{{ frappe.format_value(accumulator3.refund, {\"fieldtype\":\"Currency\"}) }} </td>\n                <td class= \"col-xs-2 text-right\"> </td>\n            </tr>\n         </table>\n\n    </div>\n</div>\n\n<div style= \"margin-top:155px\"></div>\n\n<div class= \"row\">\n    <div class= \"col-xs-9\">\n    </div>\n    <div class= \"col-xs-3\">\n        <table class= \"table text-center\">\n            <tr>\n                <td class= \"col-xs-2\" style= \"border-top:none;\"><b>{{ frappe.db.get_value(\"User\", frappe.user,                    \"full_name\") }}</b></td>\n            </tr>\n            <tr>\n                <td style= \"border-top:1px solid #d1d8dd;\"><b>Staf/Personnel</b></td>\n            </tr>\n        </table>\n    </div>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2020-06-16 14:00:59.220288",
 "modified_by": "Administrator",
 "module": "Inn Hotels",
 "name": "Folio A",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Server",
 "show_section_headings": 0,
 "standard": "Yes"
}