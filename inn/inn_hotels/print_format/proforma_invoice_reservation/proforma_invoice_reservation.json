{
 "align_labels_right": 0,
 "creation": "2020-07-28 13:10:55.855463",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Inn Reservation",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<div>\n  <h3><b>HOTEL DAILY INN</b></h3>\n  <p>Jl. Jenderal Ahmad Yani Kavling 67 Cempaka Putih Timur, Jakarta Pusat</p>\n  <p>Jakarta Indonesia. 10510</p>\n  <p>Phone: 021-21473999 Fax: 021-21473998</p>\n  <hr style='border:0.5px solid black; width:100%; margin:5px 0px 10px 0px;'>\n</div>\n\n<div class=\"row\">\n  <div class=\"col-xs-2\">\n    <b>Customer: </b>\n  </div>\n  <div class=\"col-xs-10\">\n    {{doc.customer_id}}\n  </div>\n</div>\n\n<table class= \"table table-bordered\">\n  <tr>\n    <th>No</th>\n    <th>Arrival Date</th>\n    <th>Departure Data</th>\n    <th>Room Type</th>\n    <th>Room Rate</th>\n    <th>Total Room</th>\n    <th>Total Night</th>\n    <th>Total</th>\n  </tr>\n  {% if doc.status != 'Reserved' %}\n    <tr>\n      <td>-</td>\n      <td>-</td>\n      <td>-</td>\n      <td>-</td>\n      <td>-</td>\n      <td>-</td>\n      <td>-</td>\n      <td>-</td>\n    </tr>\n  {% else %}\n    {% set reservations = frappe.get_all(\"Inn Reservation\", filters={\"group_id\": doc.group_id}, fields=[\"expected_arrival\", \"expected_departure\", \"room_type\", \"room_rate\", \"base_room_rate\", \"total_night\"]) %}\n\n    {% set total_rooms = {} %}\n\n    {% for r in reservations %}\n      {% set key = r.expected_arrival.strftime('%Y-%m-%d') + r.expected_departure.strftime('%Y-%m-%d') + r.room_type + r.room_rate %}\n      {% if key not in total_rooms %}\n        {% set _ = total_rooms.update({key: 1}) %}\n      {% else %}\n        {% set _ = total_rooms.update({key: total_rooms[key] + 1}) %}\n      {% endif %}\n    {% endfor %}\n    \n    {% set variable = namespace(number = 1) %}\n    {% set key_used = {} %}\n\n    {% for r in reservations %}\n      {% set key = r.expected_arrival.strftime('%Y-%m-%d') + r.expected_departure.strftime('%Y-%m-%d') + r.room_type + r.room_rate %}\n      {% if key not in key_used %}\n        <tr>\n          <td>{{variable.number}}</td>\n          <td>{{r.expected_arrival}}</td>\n          <td>{{r.expected_departure}}</td>\n          <td>{{r.room_type}}</td>\n          <td>{{r.base_room_rate}}</td>\n          <td>{{total_rooms[key]}}</td>\n          <td>{{r.total_night}}</td>\n          <td>{{total_rooms[key]*r.total_night*r.base_room_rate}}</td>\n        </tr>\n        {% set variable.number = variable.number + 1 %}\n        {% set _ = key_used.update({key: \"\"}) %}\n      {% endif %}\n    {% endfor %}\n  {% endif %}\n</table>",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2020-08-13 17:55:36.650024",
 "modified_by": "Administrator",
 "module": "Inn Hotels",
 "name": "Proforma Invoice Reservation",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Server",
 "show_section_headings": 0,
 "standard": "Yes"
}